$(document).ready(function() {
    if (localStorage.getItem('preferences') === 'true') {
        document.querySelector('body').classList.add('dark');
        $('#btn-toggle').addClass('bi-moon-fill');
        $('#btn-toggle').removeClass('bi-sun-fill');
    } else {
        document.querySelector('body').classList.remove('dark');
        $('#btn-toggle').addClass('bi-sun-fill');
        $('#btn-toggle').removeClass('bi-moon-fill');
    }
    // localStorage.getItem('preferences') === 'true' ? document.querySelector('body').classList.add('dark') : document.querySelector('body').classList.remove('dark');
    $('a[href*="#"]:not([href="#"])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') || location.hostname == this.hostname) {
            let target = $(this.hash);
            target = target.length ? target : $('[name='+ this.hash.slice(1) +']');
            if (target.length) {
                $('html, body').animate({ scrollTop: target.offset().top - 0 }, 12);
                return false;
            }
        }
    });
    $('.w-item').click(function() {
        $(this).addClass('work-active');
        $('.filter .w-item').not(this).removeClass('work-active');
    });
    $('.services-btn').click(function(event) {
        event.preventDefault();
        $('.overlay').show()
        $(this).next('.modal').css({
            'visibility': 'visible',
            'opacity': 1,
        });
    });
    $('#btn-menu').click(function() {
        $('#btn-menu i').toggleClass('bi-fullscreen-exit bi-fullscreen');
        $('.nav-menu').toggleClass('nav-show');
    });
    $(document).keyup(function(event) {
        if (event.keyCode == 27) {
            $('.modal').css({
                'visibility': 'hidden',
                'opacity': 0,
            });
            $('.overlay').hide()
        }
    });
    $('.overlay, .close').on('click', function() {
        $('.overlay').hide()
        $('.modal').css({
            'visibility': 'hidden',
            'opacity': 0,
        });
    });
    $('#btn-toggle').click(function() {
        $('body').toggleClass('dark');
        // $(this).toggleClass('bi-toggle-off bi-toggle-on');
        $(this).toggleClass('bi-sun-fill bi-moon-fill');
        var activeBody = document.querySelector('body').classList.contains('dark');
        localStorage.setItem('preferences', activeBody);
    });

    $('#btn-send').click(function(event) {
        // event.preventDefault();
        console.log(event);

    });
});

let scrollNow = window.pageYOffset;
$(window).scroll(function() {
    let scrollPos = $(this).scrollTop();
    if (scrollPos > 69) {
        $('#navigate').addClass('shadow');
        $('#btn-toggle').addClass('clr-active');
        $('.header').addClass('active');
    } else {
        $('#navigate').removeClass('shadow');
        $('#btn-toggle').removeClass('clr-active');
        $('.header').removeClass('active');
    }
    scrollNow = scrollPos;
    let winHeight = $(this).height();
    let docHeight = $(document).height();
    let scrollPercentage = 100 * scrollPos / (docHeight - winHeight);
    if (winHeight+scrollPos > (docHeight-5)) {}
    $('#moving').css('width', (scrollPercentage) + '%');
    let scrollYes = window.pageYOffset;
    $('.nav-item .nav-link').each(function(i) {
        let link = $(this);
        let elem = $(link.attr('href'));
        if (scrollPos > elem.position().top - 5) {
            $('.nav-item a').not(this).removeClass('nav-active');
            $('.nav-item a').eq(i).addClass('nav-active');
        } else {}
    });
});

new Typed('#auto', {
    strings: [
        'IT Enthusiast',
        'Full Stack Developer',
        'DB Administrator',
        'Dream Achiever',
        'Data Analyst',
        'Pianist',
        'Your Bestie',
    ],
    loop: true,
    startDelay: 200,
    backDelay: 1000,
    backSpeed: 20,
    typeSpeed: 20
});

let mixerPortfolio = mixitup('.work .container', {
    load: {
        filter: '.design'
    },
    selectors: {
        target: '.work .card',
    },
    animation: {
        duration: 300,
    }
});

let swiperTestimonial = new Swiper('.testimonial .container', {
    spaceBetween: 32,
    loop: true,
    grabCursor: true,
    pagination: {
        el: '.swiper-pagination',
        clickable: true
    },
    breakpoints: {
        768: {
            slidesPerView: 3,
            spaceBetween: 32
        }
    }
});